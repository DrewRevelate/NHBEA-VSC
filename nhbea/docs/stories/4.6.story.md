# Story 4.6: Fix Component-Level Brand Alignment Issues

## Status
approved

## Story
**As a** Front-end Developer,
**I want** to fix the remaining hardcoded color violations in specific components identified in the brand alignment report,
**so that** we achieve complete brand consistency across the entire website and eliminate all non-compliant color usage.

## Acceptance Criteria
1. Replace hardcoded Tailwind classes with brand design tokens in RecognitionShowcaseSection.tsx
2. Replace hardcoded Tailwind classes with brand design tokens in SpeakersSection.tsx
3. Replace hardcoded Tailwind classes with brand design tokens in AwardNominationForm.tsx
4. Replace hardcoded Tailwind classes with brand design tokens in SocialMediaFeed.tsx
5. Update Tailwind configuration to include brand-specific color classes
6. All components pass brand validation testing
7. Maintain accessibility compliance (WCAG 2.1 AA) throughout the changes
8. Preserve all existing functionality while applying brand-compliant colors

## Tasks / Subtasks
- [x] Fix RecognitionShowcaseSection.tsx hardcoded colors (AC: 1)
  - [x] Replace `blue-500`, `indigo-600`, `slate-800`, `slate-600` with `var(--nhbea-royal-blue)` design tokens
  - [x] Update background colors to use brand-consistent royal blue variations
  - [x] Ensure text contrast ratios meet accessibility standards
  - [x] Test component rendering with new brand colors
- [x] Fix SpeakersSection.tsx hardcoded colors (AC: 2)
  - [x] Replace `blue-500`, `blue-700`, `blue-800` with brand design tokens
  - [x] Fix `border-white` to use semantic border tokens
  - [x] Update hover states to use brand-compliant color variations
  - [x] Verify speaker card styling maintains readability
- [x] Fix AwardNominationForm.tsx hardcoded colors (AC: 3)
  - [x] Replace `border-gray-300` with `--color-border-primary` token
  - [x] Replace `focus:ring-blue-500` with `--nhbea-royal-blue` focus states
  - [x] Replace `focus:border-blue-500` with brand-compliant focus borders
  - [x] Test form validation states with new color scheme
- [x] Fix SocialMediaFeed.tsx hardcoded colors (AC: 4)
  - [x] Replace generic `bg-blue-500`, `bg-blue-600`, `bg-blue-700` with brand-specific royal blue tokens
  - [x] Update social media icons to use consistent brand colors
  - [x] Ensure social feed maintains visual hierarchy with brand colors
  - [x] Test responsive behavior with new color scheme
- [x] Update Tailwind configuration for brand colors (AC: 5)
  - [x] Add brand-specific color classes to `tailwind.config.ts`
  - [x] Include `nhbea-royal-blue`, `nhbea-royal-blue-dark`, `nhbea-accent-orange` as Tailwind utilities
  - [x] Update existing utility classes to reference design tokens
  - [x] Test build process with updated Tailwind configuration
- [x] Run comprehensive brand validation testing (AC: 6)
  - [x] Execute brand validation script against all modified components
  - [x] Verify no hardcoded colors remain in identified components
  - [x] Test visual consistency across all pages
  - [x] Validate color usage follows 60-30-10 brand rule
- [x] Validate accessibility compliance (AC: 7)
  - [x] Run color contrast validation on all modified components
  - [x] Ensure WCAG 2.1 AA compliance maintained
  - [x] Test keyboard navigation and focus indicators
  - [x] Verify screen reader compatibility with color changes
- [x] Preserve functionality testing (AC: 8)
  - [x] Test all interactive elements in modified components
  - [x] Verify form submissions still work correctly
  - [x] Test responsive behavior across breakpoints
  - [x] Ensure no regressions in existing user flows

## Dev Notes

### Previous Story Context
Building upon Epic 4 stories which established:
- **Story 4.1**: Conservative royal blue foundation design token system implemented in `globals.css`
- **Story 4.2-4.5**: Complete brand transformation and validation system established
- **Brand Token System**: Three-layer architecture (Brand → Semantic → Component) now available
- **Accessibility Standards**: WCAG 2.1 AA compliance maintained throughout brand implementation

### Critical Brand Issues Identified
[Source: BRAND_ALIGNMENT_REPORT.md]
The brand alignment report identified these specific violations requiring immediate attention:

**RecognitionShowcaseSection.tsx**:
- Uses: `blue-500`, `indigo-600`, `slate-800`, `slate-600`
- Fix Required: Replace with `var(--nhbea-royal-blue)` tokens

**SpeakersSection.tsx**:
- Uses: `blue-500`, `blue-700`, `blue-800`, `border-white`
- Fix Required: Use brand design tokens

**AwardNominationForm.tsx**:
- Uses: `border-gray-300`, `focus:ring-blue-500`, `focus:border-blue-500`
- Fix Required: Use `--color-border-primary`, `--nhbea-royal-blue` tokens

**SocialMediaFeed.tsx**:
- Uses: Generic `bg-blue-500`, `bg-blue-600`, `bg-blue-700`
- Fix Required: Use brand-specific royal blue design tokens

### Design Token System Available
[Source: Story 4.1 implementation, globals.css]
Complete design token system already implemented and available:

**Primary Brand Colors**:
```css
--nhbea-royal-blue: #2563eb;          /* Main brand blue */
--nhbea-royal-blue-dark: #1e40af;     /* Headers, emphasis */
--nhbea-royal-blue-deeper: #1e3a8a;   /* Maximum authority elements */
--nhbea-royal-blue-light: #3b82f6;    /* Links, secondary elements */
--nhbea-royal-blue-lighter: #60a5fa;  /* Backgrounds, success states */
--nhbea-royal-blue-subtle: #93c5fd;   /* Subtle highlights */
```

**Semantic Design Tokens**:
```css
--brand-primary: var(--nhbea-royal-blue);
--color-text-primary: var(--nhbea-gray-800);
--color-border-primary: var(--nhbea-gray-300);
--button-primary-bg: var(--brand-primary);
```

### File Locations for Fixes
[Source: architecture/core-backend-components.md, existing codebase]
- **Components**: `/src/components/RecognitionShowcaseSection.tsx`, `/src/components/SpeakersSection.tsx`, `/src/components/AwardNominationForm.tsx`, `/src/components/SocialMediaFeed.tsx`
- **Tailwind Config**: `/tailwind.config.ts` - extend colors section
- **Brand Validation**: `/src/lib/brandValidation.ts` - run validation after fixes
- **Global Styles**: `/src/app/globals.css` - design tokens already implemented

### Technical Requirements
[Source: architecture/architecture-style.md]
- **Framework**: Next.js 14+ with App Router (static export compatible)
- **Styling System**: Tailwind CSS with CSS custom properties
- **Build Process**: Must maintain static export functionality
- **Performance**: No impact on CSS bundle size or build times
- **Browser Support**: CSS custom properties (full modern browser support)

### Tailwind Configuration Update Required
[Source: BRAND_ALIGNMENT_REPORT.md#tailwind-configuration]
Add to `tailwind.config.ts`:
```ts
extend: {
  colors: {
    'nhbea-royal-blue': 'var(--nhbea-royal-blue)',
    'nhbea-royal-blue-dark': 'var(--nhbea-royal-blue-dark)',
    'nhbea-accent-orange': 'var(--nhbea-accent-orange)',
    // ... other brand colors
  }
}
```

### Brand Validation Requirements
[Source: Story 4.5, brandValidation.ts]
- **Validation Script**: Use existing `brandValidation.ts` to verify no hardcoded colors remain
- **Compliance Check**: Must achieve 95%+ brand compliance score
- **Pattern Matching**: Validate against specific hardcoded color patterns identified in report
- **Color Usage Rules**: Ensure adherence to 60-30-10 color rule implementation

### Accessibility Constraints
[Source: Story 4.1 requirements, WCAG 2.1 AA standards]
- **Color Contrast**: All new color combinations must meet 4.5:1 ratio for normal text, 3:1 for large text
- **Focus Indicators**: Maintain proper focus ring visibility with brand colors
- **Screen Readers**: Ensure color changes don't impact semantic meaning
- **Keyboard Navigation**: Preserve existing keyboard navigation patterns

### Testing Requirements
[Source: Previous story patterns, architecture testing strategy]
- **Visual Testing**: Manual testing across all breakpoints (mobile, tablet, desktop)
- **Brand Validation**: Automated validation using existing brand validation script
- **Accessibility Testing**: Color contrast validation and WCAG 2.1 AA compliance testing
- **Functionality Testing**: Ensure no regressions in form submissions, interactions, or user flows
- **Cross-browser Testing**: Verify CSS custom property support and rendering consistency

### Technical Constraints
- Must maintain existing component functionality and behavior
- Cannot break static export compatibility
- Must preserve performance characteristics
- CSS changes should not impact build times or bundle size
- All existing unit tests must continue to pass
- Cannot introduce new dependencies or frameworks

### Security Considerations
[Source: architecture/10-security.md]
- **Input Handling**: Ensure color token updates don't affect form input validation
- **CSS Injection**: Use only predefined design tokens, no dynamic color generation
- **Build Security**: Validate Tailwind configuration changes don't introduce vulnerabilities

## Testing

**Test File Locations**: No new test files required; existing component tests should verify functionality
**Test Standards**: Visual testing and accessibility validation using existing patterns
**Testing Frameworks**: 
- Manual visual testing across breakpoints
- Accessibility testing using axe-core or similar tools
- Brand validation using existing brandValidation.ts script
- Cross-browser compatibility testing

**Specific Testing Requirements**:
- Verify all hardcoded colors are replaced with design tokens
- Test color contrast ratios meet WCAG 2.1 AA standards (≥4.5:1 for normal text)
- Validate visual consistency across all pages with component changes
- Test responsive behavior of components with new color scheme
- Verify form functionality remains unchanged in AwardNominationForm
- Test social media feed visual hierarchy and readability
- Validate Tailwind build process with updated configuration
- Test brand validation script returns 95%+ compliance score
- Ensure no regressions in existing user interactions or workflows

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-07-30 | 1.0 | Initial story creation to fix critical brand alignment issues identified in brand audit | Bob, Scrum Master |

## Dev Agent Record
[To be filled by Dev Agent]

## QA Results
[To be filled by QA Agent]